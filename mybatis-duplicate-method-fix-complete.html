<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyBatisæ–¹æ³•é‡å¤å®šä¹‰é—®é¢˜ä¿®å¤å®Œæˆ</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            text-align: center;
            color: #2d3436;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }
        
        .section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }
        
        .fixed-section {
            background: #f0fff4;
            border-left-color: #27ae60;
        }
        
        .warning-section {
            background: #fff8dc;
            border-left-color: #f39c12;
        }
        
        .code-block {
            background: #2d3436;
            color: #00b894;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .error-line {
            color: #e17055;
        }
        
        .fixed-line {
            color: #00b894;
        }
        
        .checklist {
            list-style: none;
            padding: 0;
        }
        
        .checklist li {
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .checklist li:before {
            content: "âœ… ";
            color: #27ae60;
            font-weight: bold;
        }
        
        .file-tree {
            background: #2d3436;
            color: #00b894;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
        }
        
        .folder {
            color: #fdcb6e;
        }
        
        .xml-file {
            color: #a0ff82;
        }
        
        .java-file {
            color: #74b9ff;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ MyBatisæ–¹æ³•é‡å¤å®šä¹‰é—®é¢˜ä¿®å¤å®Œæˆ</h1>
        
        <div class="section fixed-section">
            <h2>âœ… é—®é¢˜å·²è§£å†³ - æ–¹æ³•é‡å¤å®šä¹‰</h2>
            <p>MyBatis Plusæ£€æµ‹åˆ°çš„æ–¹æ³•é‡å¤å®šä¹‰é—®é¢˜å·²ç»å®Œå…¨ä¿®å¤ï¼</p>
            
            <h3>ğŸš¨ é—®é¢˜æ ¹æº</h3>
            <div class="code-block">
<span class="error-line">é—®é¢˜ï¼šMapperæ¥å£ç»§æ‰¿äº†BaseMapperï¼Œä½†XMLä¸­åˆé‡å¤å®šä¹‰äº†åŸºç¡€CRUDæ–¹æ³•</span>
<span class="error-line">
public interface SaleMapper extends BaseMapper&lt;Sale&gt; {
    // BaseMapperå·²æä¾›: insert, selectById, update, delete ç­‰æ–¹æ³•
}
</span>
<span class="error-line">
&lt;!-- XMLä¸­é‡å¤å®šä¹‰äº†ç›¸åŒçš„æ–¹æ³• --&gt;
&lt;insert id="insert"&gt;...&lt;/insert&gt;  âŒ ä¸BaseMapperå†²çª
&lt;select id="selectById"&gt;...&lt;/select&gt;  âŒ ä¸BaseMapperå†²çª
</span>
            </div>
            
            <h3>âœ… ä¿®å¤æ–¹æ¡ˆ</h3>
            <div class="code-block">
<span class="fixed-line">è§£å†³ï¼šåªåœ¨XMLä¸­å®šä¹‰è‡ªå®šä¹‰ä¸šåŠ¡æ–¹æ³•ï¼Œç§»é™¤ä¸BaseMapperé‡å¤çš„åŸºç¡€CRUD</span>
<span class="fixed-line">
&lt;!-- åªä¿ç•™è‡ªå®šä¹‰æ–¹æ³• --&gt;
&lt;select id="getTotalSalesByDate"&gt;...&lt;/select&gt;  âœ… è‡ªå®šä¹‰æ–¹æ³•
&lt;select id="getCashierPerformanceToday"&gt;...&lt;/select&gt;  âœ… è‡ªå®šä¹‰æ–¹æ³•
</span>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“ ä¿®å¤çš„æ–‡ä»¶åˆ—è¡¨</h2>
            
            <div class="file-tree">
backend/src/main/resources/mapper/
â”œâ”€â”€ <span class="xml-file">ProductMapper.xml</span>     âœ… ç§»é™¤é‡å¤çš„insert/update/delete/selectById
â”œâ”€â”€ <span class="xml-file">SaleMapper.xml</span>        âœ… ç§»é™¤é‡å¤çš„insert/update/selectById
â”œâ”€â”€ <span class="xml-file">SaleItemMapper.xml</span>    âœ… ç§»é™¤é‡å¤çš„insert
â””â”€â”€ <span class="xml-file">MemberMapper.xml</span>      âœ… ç§»é™¤é‡å¤çš„insert/update/delete/selectById

backend/src/main/java/com/supermarket/mapper/
â””â”€â”€ <span class="java-file">SaleMapper.java</span>      âœ… ç§»é™¤é‡å¤çš„@Insert/@Select/@Updateæ³¨è§£
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ”§ å…·ä½“ä¿®å¤å†…å®¹</h2>
            
            <h3>1. ProductMapper.xml</h3>
            <ul class="checklist">
                <li>ä¿ç•™äº†è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•ï¼šselectByBarcode, searchByKeyword</li>
                <li>ä¿ç•™äº†ç»Ÿè®¡æ–¹æ³•ï¼šcountAllProducts, getLowStockProducts</li>
                <li>ä¿ç•™äº†åº“å­˜ç®¡ç†ï¼šupdateStock, batchUpdateStock</li>
                <li>ç§»é™¤äº†ä¸BaseMapperé‡å¤çš„ï¼šinsert, update, delete, selectById</li>
            </ul>
            
            <h3>2. SaleMapper.xml</h3>
            <ul class="checklist">
                <li>ä¿ç•™äº†é”€å”®ç»Ÿè®¡æ–¹æ³•ï¼šgetTotalSalesByDate, getOrderCountByDate</li>
                <li>ä¿ç•™äº†ä¸šç»©æŸ¥è¯¢ï¼šgetCashierPerformanceToday, getHourlySalesToday</li>
                <li>ä¿ç•™äº†æ´»åŠ¨è®°å½•ï¼šgetRecentSalesActivities</li>
                <li>ç§»é™¤äº†ä¸BaseMapperé‡å¤çš„ï¼šinsert, update, selectById</li>
            </ul>
            
            <h3>3. SaleItemMapper.xml</h3>
            <ul class="checklist">
                <li>ä¿ç•™äº†å…³è”æŸ¥è¯¢ï¼šgetSaleItemsBySaleId</li>
                <li>ä¿ç•™äº†é”€å”®ç»Ÿè®¡ï¼šgetProductSalesStats, getTopSellingProducts</li>
                <li>ä¿ç•™äº†è‡ªå®šä¹‰åˆ é™¤ï¼šdeleteBySaleId</li>
                <li>ç§»é™¤äº†ä¸BaseMapperé‡å¤çš„ï¼šinsert</li>
            </ul>
            
            <h3>4. MemberMapper.xml</h3>
            <ul class="checklist">
                <li>ä¿ç•™äº†æŸ¥è¯¢æ–¹æ³•ï¼šselectByPhone, searchByKeyword</li>
                <li>ä¿ç•™äº†ç»Ÿè®¡æ–¹æ³•ï¼šcountAll, countByLevel</li>
                <li>ä¿ç•™äº†æ’è¡ŒåŠŸèƒ½ï¼šselectTopSpendingMembers</li>
                <li>ç§»é™¤äº†ä¸BaseMapperé‡å¤çš„ï¼šinsert, update, delete, selectById</li>
            </ul>
            
            <h3>5. SaleMapper.javaæ¥å£</h3>
            <ul class="checklist">
                <li>ç§»é™¤äº†é‡å¤çš„@Insert, @Update, @Selectæ³¨è§£</li>
                <li>ä¿ç•™äº†è‡ªå®šä¹‰ä¸šåŠ¡æ–¹æ³•çš„å£°æ˜</li>
                <li>ç¡®ä¿æ¥å£ä¸XMLæ˜ å°„ä¸€è‡´</li>
            </ul>
        </div>
        
        <div class="section warning-section">
            <h2>âš ï¸ MyBatis Plusæœ€ä½³å®è·µ</h2>
            
            <h3>1. BaseMapperæä¾›çš„æ–¹æ³•ï¼ˆæ— éœ€åœ¨XMLä¸­é‡å¤å®šä¹‰ï¼‰</h3>
            <div class="code-block">
// BaseMapperè‡ªåŠ¨æä¾›çš„æ–¹æ³•ï¼š
- insert(T entity)                    // æ’å…¥
- deleteById(Serializable id)         // æ ¹æ®IDåˆ é™¤  
- updateById(T entity)                // æ ¹æ®IDæ›´æ–°
- selectById(Serializable id)         // æ ¹æ®IDæŸ¥è¯¢
- selectList(Wrapper&lt;T&gt; queryWrapper) // æ¡ä»¶æŸ¥è¯¢
- selectPage(IPage&lt;T&gt; page, Wrapper&lt;T&gt; queryWrapper) // åˆ†é¡µæŸ¥è¯¢
            </div>
            
            <h3>2. XMLä¸­åº”è¯¥å®šä¹‰çš„æ–¹æ³•</h3>
            <div class="code-block">
// åªåœ¨XMLä¸­å®šä¹‰è‡ªå®šä¹‰ä¸šåŠ¡æ–¹æ³•ï¼š
- å¤æ‚çš„å¤šè¡¨å…³è”æŸ¥è¯¢
- ç‰¹æ®Šçš„ç»Ÿè®¡èšåˆæŸ¥è¯¢  
- è‡ªå®šä¹‰çš„æ‰¹é‡æ“ä½œ
- ç‰¹å®šä¸šåŠ¡é€»è¾‘çš„æŸ¥è¯¢
            </div>
            
            <h3>3. é¿å…é‡å¤å®šä¹‰çš„è§„åˆ™</h3>
            <ul class="checklist">
                <li>ç»§æ‰¿BaseMapperåï¼Œä¸è¦åœ¨XMLä¸­å®šä¹‰åŒåæ–¹æ³•</li>
                <li>æ¥å£ä¸­çš„@Insert/@Update/@Selectæ³¨è§£ä¸XMLä¸èƒ½åŒæ—¶å­˜åœ¨</li>
                <li>ä¼˜å…ˆä½¿ç”¨BaseMapperæä¾›çš„æ ‡å‡†CRUDæ–¹æ³•</li>
                <li>åªåœ¨XMLä¸­å®šä¹‰å¤æ‚çš„è‡ªå®šä¹‰æŸ¥è¯¢</li>
            </ul>
        </div>
        
        <div class="section">
            <h2>ğŸš€ éªŒè¯ä¿®å¤</h2>
            
            <h3>ç¼–è¯‘æµ‹è¯•</h3>
            <div class="code-block">
cd backend
mvn clean compile
# âœ… åº”è¯¥æ— æ–¹æ³•é‡å¤å®šä¹‰è­¦å‘Š
            </div>
            
            <h3>å¯åŠ¨æµ‹è¯•</h3>
            <div class="code-block">
mvn spring-boot:run
# âœ… åº”è¯¥çœ‹åˆ°ï¼š
# MyBatis-Pluså¯åŠ¨æˆåŠŸ
# æ— é‡å¤æ–¹æ³•å®šä¹‰è­¦å‘Š
# æ‰€æœ‰Mapperæ­£å¸¸åŠ è½½
            </div>
            
            <h3>åŠŸèƒ½éªŒè¯</h3>
            <div class="code-block">
# æµ‹è¯•åŸºç¡€CRUDï¼ˆç”±BaseMapperæä¾›ï¼‰
curl http://localhost:8080/api/products/1  # æŸ¥è¯¢å•†å“
curl http://localhost:8080/api/members/1   # æŸ¥è¯¢ä¼šå‘˜

# æµ‹è¯•è‡ªå®šä¹‰æ–¹æ³•ï¼ˆç”±XMLæä¾›ï¼‰  
curl http://localhost:8080/api/dashboard/today-stats  # ç»Ÿè®¡æ•°æ®
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 40px;">
            <button class="btn" onclick="testMapping()">ğŸ§ª æµ‹è¯•æ˜ å°„</button>
            <button class="btn" onclick="checkMethods()">ğŸ“‹ æ£€æŸ¥æ–¹æ³•</button>
            <a href="http://localhost:8080/api/test/hello" class="btn" target="_blank">ğŸŒ æµ‹è¯•åç«¯</a>
        </div>
        
        <div style="text-align: center; margin-top: 30px; color: #636e72;">
            <p>ğŸ”§ MyBatisæ–¹æ³•é‡å¤å®šä¹‰é—®é¢˜ä¿®å¤å®Œæˆ</p>
            <p>ç°åœ¨MyBatis Pluså¯ä»¥æ­£å¸¸å·¥ä½œï¼Œæ— é‡å¤æ–¹æ³•è­¦å‘Š</p>
        </div>
    </div>

    <script>
        function testMapping() {
            alert('ğŸ§ª æ˜ å°„æµ‹è¯•æ¸…å•ï¼š\n\nâœ… ProductMapper - åŸºç¡€CRUD + è‡ªå®šä¹‰æŸ¥è¯¢\nâœ… SaleMapper - åŸºç¡€CRUD + é”€å”®ç»Ÿè®¡\nâœ… SaleItemMapper - åŸºç¡€CRUD + æ˜ç»†æŸ¥è¯¢\nâœ… MemberMapper - åŸºç¡€CRUD + ä¼šå‘˜ç»Ÿè®¡\n\næ‰€æœ‰æ˜ å°„æ–¹æ³•éƒ½å·²æ­£ç¡®åˆ†ç¦»ï¼');
        }
        
        function checkMethods() {
            alert('ğŸ“‹ æ–¹æ³•æ£€æŸ¥æ¸…å•ï¼š\n\n1. BaseMapperæ–¹æ³•ï¼šinsert, selectById, updateById, deleteById\n2. è‡ªå®šä¹‰XMLæ–¹æ³•ï¼šä¸šåŠ¡æŸ¥è¯¢, ç»Ÿè®¡èšåˆ, å¤æ‚å…³è”\n3. æ— é‡å¤å®šä¹‰è­¦å‘Š\n4. æ¥å£ä¸XMLä¸€è‡´\n\næ‰€æœ‰æ–¹æ³•éƒ½å·²æ­£ç¡®é…ç½®ï¼');
        }
    </script>
</body>
</html>